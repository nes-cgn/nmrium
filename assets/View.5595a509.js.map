{"version":3,"file":"View.5595a509.js","sources":["../../src/demo/views/View.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { ObjectInspector } from 'react-inspector';\n\nimport NMRium from '../../component/NMRium';\n\nasync function loadData(file) {\n  const response = await fetch(file);\n  checkStatus(response);\n  const data = await response.json();\n  return data;\n}\n\nfunction checkStatus(response) {\n  if (!response.ok) {\n    throw new Error(`HTTP ${response.status} - ${response.statusText}`);\n  }\n  return response;\n}\n\nexport default function View(props) {\n  const [data, setData] = useState();\n  const { file, title, baseURL } = props;\n  const [callbackData, setCallbackData] = useState<Array<any>>([]);\n  const [isCallbackVisible, showCallback] = useState(false);\n\n  useEffect(() => {\n    if (file) {\n      void loadData(file).then((d) => {\n        const _d = JSON.parse(JSON.stringify(d).replace(/\\.\\/+?/g, baseURL));\n        setData(_d);\n      });\n    } else {\n      setData(undefined);\n    }\n  }, [baseURL, file, props]);\n\n  const changeHandler = useCallback((logData) => {\n    setCallbackData((prevLogs) => {\n      return prevLogs.concat({\n        datetime: new Date().toLocaleTimeString(),\n        data: logData,\n      });\n    });\n  }, []);\n\n  const showCallbackHandler = useCallback(() => {\n    showCallback((prevflag) => !prevflag);\n  }, []);\n\n  const clearHandler = useCallback(() => {\n    setCallbackData([]);\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '100%',\n        marginLeft: 30,\n      }}\n    >\n      <div\n        style={{\n          height: '60px',\n          display: 'flex',\n          flexDirection: 'column',\n          position: 'relative',\n        }}\n      >\n        <h5\n          style={{\n            fontWeight: 700,\n            fontSize: '1.5em',\n            lineHeight: '1.4em',\n            marginBottom: '15px',\n          }}\n        >\n          Display and process 1D NMR spectra from a JCAMP-DX file\n        </h5>\n        {title && (\n          <p\n            style={{\n              marginTop: '-10px',\n              marginBottom: '1rem',\n              fontWeight: 400,\n              color: '#9a9a9a',\n              fontSize: '0.7142em',\n            }}\n          >\n            {title}\n          </p>\n        )}\n        {process.env.NODE_ENV !== 'production' && (\n          <button\n            type=\"button\"\n            onClick={showCallbackHandler}\n            style={{\n              position: 'absolute',\n              right: '20px',\n              top: '20px',\n              backgroundColor: 'white',\n              width: '100px',\n              fontSize: '12px',\n            }}\n          >\n            {isCallbackVisible ? 'Hide callback ' : 'Show callback '}\n          </button>\n        )}\n      </div>\n      <div\n        style={{\n          height: 'calc(100% - 75px)',\n          display: 'flex',\n          width: '100%',\n        }}\n      >\n        <div style={{ display: 'flex', flexDirection: 'row', width: '100%' }}>\n          <div style={{ width: isCallbackVisible ? '75%' : '100%' }}>\n            <NMRium\n              data={data}\n              onDataChange={changeHandler}\n              workspace={props.workspace || null}\n            />\n          </div>\n          {process.env.NODE_ENV !== 'production' && (\n            <div\n              style={\n                isCallbackVisible\n                  ? {\n                      backgroundColor: 'white',\n                      width: '25%',\n                      marginLeft: '5px',\n                    }\n                  : { width: 0, display: 'none' }\n              }\n            >\n              <div\n                style={{\n                  backgroundColor: 'lightgray',\n                  padding: '5px',\n                  height: '30px',\n                  position: 'relative',\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <span>Callback</span>\n                <button\n                  type=\"button\"\n                  onClick={clearHandler}\n                  style={{\n                    backgroundColor: 'white',\n                    width: '50px',\n                    fontSize: '12px',\n                  }}\n                >\n                  Clear\n                </button>\n              </div>\n              <div\n                style={{\n                  padding: '5px',\n                  overflowY: 'scroll',\n                  height: 'calc(100% - 30px)',\n                }}\n              >\n                {callbackData.map((log, index) => (\n                  <div\n                    key={`${index + log.datetime}`}\n                    style={{ margin: '5px 0' }}\n                  >\n                    <span style={{ fontSize: '12px' }}>{log.datetime}</span>\n                    <ObjectInspector data={log.data} />\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["file","response","fetch","checkStatus","json","ok","Error","status","statusText","props","data","setData","useState","title","baseURL","callbackData","setCallbackData","isCallbackVisible","showCallback","useEffect","loadData","then","d","_d","JSON","parse","stringify","replace","undefined","changeHandler","useCallback","logData","prevLogs","concat","datetime","Date","toLocaleTimeString","prevflag","height","marginLeft","_jsxs","display","flexDirection","position","_jsx","fontWeight","fontSize","lineHeight","marginBottom","marginTop","color","process","width","workspace"],"mappings":"+FAKA,iBAAwBA,EAAM,CACtBC,KAAAA,GAAW,KAAMC,OAAMF,CAAD,EAC5BG,SAAYF,CAAD,EACE,KAAMA,GAASG,MAE7B,CAED,WAAqBH,EAAU,CACzB,GAAA,CAACA,EAASI,GACZ,KAAM,IAAIC,OAAO,QAAOL,EAASM,YAAYN,EAASO,YAAhD,EAEDP,MAAAA,EACR,CAED,WAA6BQ,EAAO,CAC5B,KAAA,CAACC,EAAMC,GAAWC,EAAxB,QAAA,SAAA,EACM,CAAEZ,OAAMa,QAAOC,WAAYL,EAC3B,CAACM,EAAcC,GAAmBJ,EAAAA,QAAAA,SAAqB,CAAb,CAAA,EAC1C,CAACK,EAAmBC,GAAgBN,EAAAA,QAAAA,SAAS,EAAD,EAElDO,EAAAA,QAAAA,UAAU,IAAM,CACd,AAAInB,EACGoB,EAASpB,CAAD,EAAOqB,KAAMC,AAAM,GAAA,CACxBC,KAAAA,GAAKC,KAAKC,MAAMD,KAAKE,UAAUJ,CAAf,EAAkBK,QAAQ,UAAWb,CAArC,CAAX,EACXH,EAAQY,CAAD,CAAA,CAFJ,EAKLZ,EAAQiB,MAAD,CAER,EAAA,CAACd,EAASd,EAAMS,CAAhB,CATM,EAWHoB,KAAAA,GAAgBC,sBAAaC,AAAY,GAAA,CAC7Cf,EAAiBgB,AAAa,GACrBA,EAASC,OAAO,CACrBC,SAAU,GAAIC,MAAJ,EAAWC,mBADA,EAErB1B,KAAMqB,CAAAA,CAFD,CADM,CADgB,EAO9B,CAP8B,CAAA,EASLD,SAAAA,QAAAA,YAAY,IAAM,CAC9BO,EAAAA,AAAAA,GAAa,CAACA,CAAhB,CADyB,EAEpC,EAFoC,EAIlBP,EAAAA,QAAAA,YAAY,IAAM,CACrCd,EAAgB,CAAD,CAAA,CADe,EAE7B,EAF6B,IAK9B,MAAA,CACE,MAAO,CACLsB,OAAQ,OACRC,WAAY,EAHhB,EAME,SAAA,CAAAC,EAAA,MAAA,CACE,MAAO,CACLF,OAAQ,OACRG,QAAS,OACTC,cAAe,SACfC,SAAU,UALd,EAQE,SAAA,CAAAC,EAAA,KAAA,CACE,MAAO,CACLC,WAAY,IACZC,SAAU,QACVC,WAAY,QACZC,aAAc,MALlB,EAAA,SAAA,yDAAA,CARF,EAkBGnC,GACC+B,EAAA,IAAA,CACE,MAAO,CACLK,UAAW,QACXD,aAAc,OACdH,WAAY,IACZK,MAAO,UACPJ,SAAU,UANd,EASGjC,SAAAA,CAAAA,CA5BP,EA+BGsC,EA/BH,CAAA,CAAA,EAgDAP,EAAA,MAAA,CACE,MAAO,CACLN,OAAQ,oBACRG,QAAS,OACTW,MAAO,MAJX,EAOE,WAAA,MAAA,CAAK,MAAO,CAAEX,QAAS,OAAQC,cAAe,MAAOU,MAAO,MAA5D,EACE,SAAA,CAAAR,EAAA,MAAA,CAAK,MAAO,CAAEQ,MAAOnC,EAAoB,MAAQ,MAAjD,EAAA,WACG,EAAD,CACE,OACA,aAAcY,EACd,UAAWpB,EAAM4C,WAAa,IAAA,CAHhC,CAAA,CAFJ,EAQGF,EARH,CAAA,CAAA,CAAA,CA7DJ,CAAA,CAAA,CADF,CAgID"}