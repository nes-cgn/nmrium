{"version":3,"file":"Exercise.8d70ec51.js","sources":["../../src/demo/views/Exercise.tsx"],"sourcesContent":["/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { Molecule } from 'openchemlib/full';\nimport { useState, useEffect, useCallback } from 'react';\nimport { MF } from 'react-mf';\nimport { StructureEditor } from 'react-ocl/full';\n\nimport NMRium from '../../component/NMRium';\n\nlet answers = JSON.parse(localStorage.getItem('nmrium-exercises') || '{}');\n\nasync function loadData(file) {\n  const response = await fetch(file);\n  checkStatus(response);\n  const data = await response.json();\n  return data;\n}\n\nfunction checkStatus(response) {\n  if (!response.ok) {\n    throw new Error(`HTTP ${response.status} - ${response.statusText}`);\n  }\n  return response;\n}\n\nconst titleCss = css`\n  text-transform: none;\n  margin: 0;\n  padding: 5px;\n  background-color: white;\n  font-size: 14px;\n  color: #3e3e3e;\n\n  p {\n    font-size: 10px;\n    margin: 0px;\n  }\n`;\n\nconst mainContainer = css`\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n  overflow: hidden;\n`;\n\nconst bottomContainer = css`\n  display: flex;\n  height: 50%;\n`;\n\nconst bottomRightContainer = css`\n  width: 50%;\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n`;\n\nconst mfCss = css`\n  height: 20%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n  border: 1px dashed gray;\n`;\n\nconst resultContainer = css`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 80%;\n  position: relative;\n`;\n\nconst structureEditorCss = css`\n  background-color: white;\n  flex: 1;\n  overflow: auto;\n`;\n\nconst showButtonCss = css`\n  outline: none;\n  border: none;\n  border-top: 0.55px solid #c1c1c1;\n  border-bottom: 0.55px solid #c1c1c1;\n  color: #00b707;\n  font-weight: bold;\n  font-size: 12px;\n  padding: 5px;\n\n  &:hover {\n    color: white !important;\n    background-color: #00b707;\n  }\n`;\n\nconst styles = css`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  margin-left: 30px;\n`;\n\nexport default function Exercise(props) {\n  const [data, setData] = useState<any>();\n  const [resultFlag, setResultFlag] = useState<boolean | null>(null);\n  const [answerAreaVisible, showAnswerArea] = useState(false);\n  const { file, title, baseURL } = props;\n\n  const checkAnswer = useCallback(\n    (response) => {\n      if (data.answer) {\n        const MolResponse = Molecule.fromMolfile(response);\n        const idCodeResponse = MolResponse.getIDCode();\n        answers[data.answer.idCode] = idCodeResponse;\n        localStorage.setItem('nmrium-exercises', JSON.stringify(answers));\n        if (data.answer.idCode === idCodeResponse) {\n          // correct answer\n          setResultFlag(true);\n        } else {\n          setResultFlag(false);\n          // wrong answer\n        }\n      }\n    },\n    [data],\n  );\n\n  useEffect(() => {\n    if (file) {\n      void loadData(file).then((d) => {\n        const _d = JSON.parse(JSON.stringify(d).replace(/\\.\\/+?/g, baseURL));\n\n        if (_d?.molecules?.[0]?.molfile) {\n          const molecule = Molecule.fromMolfile(_d.molecules[0].molfile);\n          const idCode = molecule.getIDCode();\n          let currentAnswer = answers[idCode];\n\n          if (currentAnswer) {\n            currentAnswer = Molecule.fromIDCode(currentAnswer).toMolfile();\n          }\n          _d.answer = {\n            idCode,\n            currentAnswer,\n            mf: molecule.getMolecularFormula().formula,\n          };\n          setData(_d);\n        }\n      });\n    } else {\n      setData({});\n    }\n  }, [baseURL, file, props]);\n\n  const showAnswerAreaHander = useCallback(() => {\n    showAnswerArea((prev) => !prev);\n  }, []);\n\n  return (\n    <div css={styles}>\n      <p css={titleCss}>\n        <strong>Exercises: </strong>Determine the unknown structure for the\n        compound having the following NMR spectrum\n        <p>{title}</p>\n      </p>\n      <div css={mainContainer}>\n        <div\n          style={{ height: answerAreaVisible ? '50%' : 'calc(100% - 25px)' }}\n        >\n          <NMRium data={data} workspace=\"exercise\" />\n        </div>\n        <button\n          css={showButtonCss}\n          type=\"button\"\n          onClick={showAnswerAreaHander}\n        >\n          {!answerAreaVisible ? 'Show answer area' : 'Hide answer area '}\n        </button>\n\n        <div\n          css={bottomContainer}\n          style={\n            answerAreaVisible\n              ? { height: '50%' }\n              : { height: '0%', visibility: 'hidden' }\n          }\n        >\n          <div css={structureEditorCss}>\n            <StructureEditor\n              svgMenu\n              fragment={false}\n              onChange={checkAnswer}\n              initialMolfile={data?.answer?.currentAnswer}\n            />\n          </div>\n          <div css={bottomRightContainer}>\n            <div css={mfCss}>\n              <MF\n                style={{ color: 'navy', fontSize: 30 }}\n                mf={data?.answer?.mf}\n              />\n            </div>\n            <div css={resultContainer}>\n              <div\n                style={{\n                  ...styles,\n                  backgroundColor:\n                    resultFlag == null ? 'white' : resultFlag ? 'green' : 'red',\n                  color: resultFlag == null ? 'black' : 'white',\n                  width: '80%',\n                  height: '80%',\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                }}\n              >\n                {resultFlag == null ? (\n                  <p>Result</p>\n                ) : resultFlag === true ? (\n                  <p>Right Molecule</p>\n                ) : (\n                  <p>Wrong Molecule !!</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["answers","JSON","parse","localStorage","getItem","file","response","fetch","checkStatus","json","ok","Error","status","statusText","titleCss","css","mainContainer","bottomContainer","bottomRightContainer","mfCss","resultContainer","structureEditorCss","showButtonCss","styles","props","data","setData","useState","resultFlag","setResultFlag","answerAreaVisible","showAnswerArea","title","baseURL","checkAnswer","useCallback","answer","idCodeResponse","MolResponse","Molecule","fromMolfile","getIDCode","idCode","setItem","stringify","useEffect","loadData","then","d","_d","replace","molecules","molfile","molecule","currentAnswer","fromIDCode","toMolfile","mf","getMolecularFormula","formula","showAnswerAreaHander","prev","_jsxs","_jsx","height","visibility","color","fontSize","backgroundColor","width","display","justifyContent","alignItems"],"mappings":"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"}